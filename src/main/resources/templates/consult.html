<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>Title</title>
    <script th:src="@{/webjars/jquery/3.4.1/jquery.min.js}"></script>
    <style>
        .black_overlay{
            display: none;
            position: absolute;
            top: 0%;
            left: 100%;
            width: 100%;
            height: 100%;
            background-color: black;
            z-index:1001;
            -moz-opacity: 0.8;
            opacity:.80;
            filter: alpha(opacity=88);
        }
        .white_content {
            display: none;
            position: absolute;
            top: 25%;
            left: 40%;
            width: 20%;
            height: 30%;
            padding: 20px;
            border: 10px solid orange;
            background-color: white;
            z-index:1002;
            overflow: auto;
        }
        #wenben{
            width: 300px;
            height: 160px;
        }
    </style>



</head>
<body>
<form th:action="@{/zixun}" method="post">
    <p>
        联系方式或关键字：
        <input type="text" name="typesel" th:value="${typesel}">
        <input type="submit" value="查询">
    </p>
    <table border="1px" width="650px" height="350px" text-align="center">
        <tr>
            <td>序号</td>
            <td>联系方式</td>
            <td>咨询内容</td>
            <td>操作</td>
        </tr>

        <tr th:each="li:${pageInfo.list}" th:id="${li.zid}" >

            <td th:text="${li.zid}" id="ti"></td>
            <td th:text="${li.zphone}"></td>
            <td th:text="${#strings.substring(li.zcontent,0,10)}"></td>
            <td>
                <a href = "JavaScript:void(0)" th:onclick = "'openDialog('+${li.zid}+')'">查看</a>
                <div id="light" class="white_content">
                    <textarea cols="20" rows="5" id="wenben">
                    </textarea>
                    <a href = "javascript:void(0)" onclick = "closeDialog()">关闭</a>
                </div>
                <div id="fade" class="black_overlay"></div>


              <!--  <a th:href="@{/cha(id=${li.zid})}">查看</a>-->


              <!-- <label for="dialogswitch" th:onclick="'chakan('+${li.zid}+')'">查看</label>-->
               <!--<label for="dialogswitch" id="chakan">查看</label>
                <input type="checkbox" id="dialogswitch" />
                <div class="dialog">
                    <h3>详细内容</h3>
                    <textarea cols="20" rows="5" id="wenben" th:text="${li.zcontent}">

                    </textarea>
                    <label class="close" for="dialogswitch">关闭</label>
                </div>-->

               <a  th:href="@{#}" th:onclick="'del('+${li.zid}+')'" style="color: blue">删除</a>

            </td>
        </tr>

    </table>
</form>
    <p>
        <a th:href="@{/cha(pageNum=${pageInfo.firstPage},typesel=${typesel})}">首页</a>
        <a th:if="${pageInfo.hasPreviousPage}" th:href="@{/cha(pageNum=${pageInfo.prePage},typesel=${typesel})}">上一页</a>
        <a th:if="${pageInfo.hasNextPage}" th:href="@{/cha(pageNum=${pageInfo.nextPage},typesel=${typesel})}">下一页</a>
        <a th:href="@{/cha(pageNum=${pageInfo.lastPage},typesel=${typesel})}">尾页</a>

    </p>


</body>

<script>

    function openDialog(id){
        $.post("/ce","id="+id,function (obj) {
            /* alert("进入aJAX");
             alert(obj);*/
            $("#wenben").html(obj);
        });

        document.getElementById('light').style.display='block';
        document.getElementById('fade').style.display='block'


    }
    function closeDialog(){
        document.getElementById('light').style.display='none';
        document.getElementById('fade').style.display='none'
    }


function del(id) {

    var flag=confirm("您确认要删除吗");
    if(flag){
        $.post("/del","id="+id,function (obj) {
            if(obj=="true"){
                alert("删除成功");
                $("#"+id).remove();
            }
        })
    }
}
/*function del(id) {
    alert(id);
    var flag=confirm("确认要删除吗")
    if(flag){
        location.href="del?id="+id;
    }
}*/





</script>
</html>